{
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/check-freshness.sh"
          },
          {
            "type": "prompt",
            "prompt": "OTel docs plugin loaded. Follow this flow:\n\n1. IF user mentions 'search/web/latest/update' → auto-proceed with checks (don't ask)\n\n2. OTHERWISE ask: 'Sync OTel docs? (yes/no)'\n\n**Freshness sources:**\n- Semconv: WebFetch 'https://api.github.com/repos/open-telemetry/semantic-conventions/releases/latest'\n- .NET SDK: WebFetch 'https://api.nuget.org/v3-flatcontainer/opentelemetry/index.json'\n- Read ${CLAUDE_PLUGIN_ROOT}/docs/VERSION.md → local version\n- Compare → report delta\n\n**On YES:** run /otelwiki:sync, then show what changed\n**On NO:** 'Check for patches?' → YES = fetch latest release notes, NO = proceed\n\nKeep it quick - user is waiting."
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Check the file being edited: For .cs files with OpenTelemetry/ActivitySource/Meter/traces/spans/metrics patterns, or for .yaml/.json files with OTel Collector config (receivers/exporters/processors/pipelines), use the otel-guide agent to validate. Verify: 1) Semantic convention attribute names are exact 2) ActivitySource used (not DiagnosticSource) 3) OTLP export/receiver config is correct 4) Pipeline configuration is valid. Report issues only, don't block. Context: ${ARGUMENTS}"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Check the file being written: For .cs files with OpenTelemetry/ActivitySource/Meter/traces/spans/metrics patterns, or for .yaml/.json files with OTel Collector config (receivers/exporters/processors/pipelines), use the otel-guide agent to validate. Verify: 1) Semantic convention attribute names are exact 2) ActivitySource used (not DiagnosticSource) 3) OTLP export/receiver config is correct 4) Pipeline configuration is valid. Report issues only, don't block. Context: ${ARGUMENTS}"
          }
        ]
      }
    ]
  }
}
